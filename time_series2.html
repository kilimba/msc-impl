<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="d3.js"></script>
    <style>
    body{
        font-family:sans-serif;
    }
    .axis path, line{
        stroke:black;
    }
    .timeseries path{
        stroke-width:3px;
    }
    .timeseries circle{
        stroke: white;
    }
    .timeseries text{
        fill: white;
        stroke: none;
        font-size:12px;
        font-weight: bold;
    }
    .line {
        float:left;
    }
    .line_container{
        width: 150px;
        height: 20px;
    }
    path{
        fill: none;
    }
    .key{
        float:right;
    }
    .key_line{
        font-size:17px;
        width:100%;
    }
    .key_square{
        height:10px;
        width:10px;
        outline:solid 1px black;
        float:left;
        margin-right:10px;
        margin-top:6px;
        margin-left:10px;
    }
    #timeseries{
        float:left;
    }
    </style>
    <link rel="stylesheet" type="text/css" href="train_colours.css" />
    <script>
    
    var time_scale;
    var percent_scale;
    var exampleData;    
    var fiveYearAgeGrps; 
    var maxValue;
    // remove later, debugging variables
    var filtered_data,total_data;
    var years;
    var selected_agegrp;
    function get_timeseries_data(d,i){
        // get the id of the current element

        selected_agegrp = d.agegrp;

        // see if we have an associated time series
        var ts = d3.select('#line_'+selected_agegrp)
        // toggle
        if (ts.empty()){
            //d3.csv('pyramid.csv', function(data){
                //total_data = data;    
                alert('#line_'+selected_agegrp);            
                filtered_data = total_data.filter(function(d){return d.agegrp === +selected_agegrp});
                draw_timeseries(filtered_data, +selected_agegrp);

           // })
        } else {
            ts.remove()
        }
    }
    
    function add_label(circle, d, i){
        alert("adding label");
        d3.select(circle)
            .transition()
            .attr('r', 9)
        
        d3.select('#line_' + d.agegrp).append('text')
            .text(d.agegrp)
            .attr('text-anchor','middle')
            .style("dominant-baseline","central")
            .attr('x', time_scale(d.time))
            .attr('y', percent_scale(getPercent(d.year,d.agegrp,d.sex)))
            .attr('class','linelabel')
            .style('opacity',0)
            .style('fill','white')
            .transition()
                .style('opacity',1)        
    }

    //var totalPopulation = d3.sum(dataForYear , function(d) { return d.n; }),
      //          percentage = function(d) { return d / totalPopulation; };

    function getDataForYear(yr){
            // FILTER FOR A PARTICULAR YEARS DATA
            dataForYear = total_data.
                filter(function(d){return d.year === yr;});
            return dataForYear;
    }

    // Get total percentage (male and female) of a population for a particular year
    // for a particular age group
    function getYearlyCombinedSexPercentage(agegroup,year){
        var filtered_data = total_data.filter(function(d){return d.agegrp 
                === agegroup & d.year === year});
        var tot_pop_for_agegroup_that_year = d3.sum(filtered_data , function(d) { return d.n; });
        filtered_data = total_data.filter(function(d){return d.year === year});
        var tot_pop_that_year = d3.sum(filtered_data , function(d) { return d.n; });
        percentage = tot_pop_for_agegroup_that_year/tot_pop_that_year;
        return percentage;

    }

    function getTotalData(){
        return total_data;
    }
    
    function getMaxPercentageForAllYears(){
        var percentages = [];
        for (i = 0; i < years.length; i++){
            percentages.push(getMaxPercentageForYear(years[i]));
        }
        return d3.max(percentages);
    }

    function getMaxPercentageForYear(yr){
        var dataForYear = getDataForYear(yr) ;
        var totalPopulation = d3.sum(dataForYear, function (d) { return d.n; });
        var maxValue = Math.max(
              d3.max(dataForYear, 
                function(d) { return (d.n)/totalPopulation; })
            );
        return maxValue;
    }

    function getPercent(year, agegrp, sex){
        var dataForYear = getDataForYear(year) ;
        var totalPopulation = d3.sum(dataForYear, function (d) { return d.n; });
        var agegrpData = dataForYear.filter(function (d){return d.agegrp === agegrp & d.sex === sex});
        agegrpPercent = agegrpData[0].n/totalPopulation;
        alert("percent: "+agegrpPercent);
        return agegrpPercent;
    }

    var femaleData;
    var maleData;
    function draw_timeseries(data, id){
        alert("Hey! "+data.length);
        femaleData = data.filter(function (d){return d.sex === "FEM" & d.agegrp === id});
        maleData = data.filter(function (d){return d.sex === "MAL" & d.agegrp === id});

        // given the age group and year, get percent of population that age group occupies

        var line = d3.svg.line()
            .x(function(d){return time_scale(new Date('01/07/'+d.year))})
            .y(function(d){return percent_scale(getPercent(d.year,d.agegrp,d.sex))})
            .interpolate("linear")
        
        var g = d3.select('#chart')
            .append('g')
            .attr('id', "line_"+id)
            .attr('class', 'timeseries line_' + id)
        
        g.append('path')
            .attr('d', line(femaleData))
        
        g.selectAll('circle')
            .data(femaleData)
            .enter()
            .append("circle")
            .attr('cx', function(d) {return time_scale(new Date('01/07/'+d.year))})
            .attr('cy', function(d) {return percent_scale(getPercent(d.year,d.agegrp,d.sex))})
            .attr('r',0)
                
        var enter_duration = 2000;
        g.selectAll('circle')
            .transition()
            .delay(function(d, i) { alert("length: "+femaleData.length);return i / femaleData.length * enter_duration; })
            .attr('r', 5)
            .each('end',function(d,i){
                alert("attempt to add label: "+i);
                if (i === data.length-1){
                    alert("attempt to add label");
                    add_label(this,d)
                }
            })
            
        
        g.selectAll('circle')
            .on('mouseover', function(d){
                d3.select(this)
                    .transition().attr('r', 9)
            })
            .on('mouseout', function(d,i){
                if (i !== data.length-1) {
                    d3.select(this).transition().attr('r', 5)
                }
            })
        
        g.selectAll('circle')
            .on('mouseover.tooltip', function(d){
                d3.select("text." + d.agegrp).remove()
                d3.select('#chart')
                    .append('text')
                    .text(d.late_percent + "%")
                    .attr('x', time_scale(d.time) + 10)
                    .attr('y', percent_scale(d.late_percent) - 10)
                    .attr('class', d.agegrp)
            })
            .on('mouseout.tooltip', function(d){
                d3.select("text." + d.agegrp)
                    .transition()
                    .duration(500)
                    .style('opacity',0)
                    .attr('transform','translate(10, -10)')
                    .remove()
            })
    }
    
    Array.prototype.unique = function(){
            var n = {},r=[];
            for(var i = 0; i < this.length; i++){
                if (!n[this[i]]) 
                {
                    n[this[i]] = true; 
                    r.push(this[i]); 
                }
            }

            return r;
    }
    
    function getData(){
        total_data = [
  {
    "agegrp":6,
    "year":2000,
    "sex":"FEM",
    "n":4625
  },
  {
    "agegrp":6,
    "year":2000,
    "sex":"MAL",
    "n":4626
  },
  {
    "agegrp":6,
    "year":2001,
    "sex":"FEM",
    "n":4757
  },
  {
    "agegrp":6,
    "year":2001,
    "sex":"MAL",
    "n":4782
  },
  {
    "agegrp":6,
    "year":2002,
    "sex":"FEM",
    "n":4669
  },
  {
    "agegrp":6,
    "year":2002,
    "sex":"MAL",
    "n":4676
  },
  {
    "agegrp":6,
    "year":2003,
    "sex":"FEM",
    "n":4368
  },
  {
    "agegrp":6,
    "year":2003,
    "sex":"MAL",
    "n":4486
  },
  {
    "agegrp":6,
    "year":2004,
    "sex":"FEM",
    "n":4299
  },
  {
    "agegrp":6,
    "year":2004,
    "sex":"MAL",
    "n":4481
  },
  {
    "agegrp":6,
    "year":2005,
    "sex":"FEM",
    "n":4417
  },
  {
    "agegrp":6,
    "year":2005,
    "sex":"MAL",
    "n":4544
  },
  {
    "agegrp":6,
    "year":2006,
    "sex":"FEM",
    "n":4491
  },
  {
    "agegrp":6,
    "year":2006,
    "sex":"MAL",
    "n":4635
  },
  {
    "agegrp":6,
    "year":2007,
    "sex":"FEM",
    "n":4898
  },
  {
    "agegrp":6,
    "year":2007,
    "sex":"MAL",
    "n":4907
  },
  {
    "agegrp":6,
    "year":2008,
    "sex":"FEM",
    "n":4876
  },
  {
    "agegrp":6,
    "year":2008,
    "sex":"MAL",
    "n":4994
  },
  {
    "agegrp":6,
    "year":2009,
    "sex":"FEM",
    "n":4943
  },
  {
    "agegrp":6,
    "year":2009,
    "sex":"MAL",
    "n":5072
  },
  {
    "agegrp":6,
    "year":2010,
    "sex":"FEM",
    "n":4796
  },
  {
    "agegrp":6,
    "year":2010,
    "sex":"MAL",
    "n":5000
  },
  {
    "agegrp":6,
    "year":2011,
    "sex":"FEM",
    "n":4740
  },
  {
    "agegrp":6,
    "year":2011,
    "sex":"MAL",
    "n":4889
  },
  {
    "agegrp":6,
    "year":2012,
    "sex":"FEM",
    "n":4464
  },
  {
    "agegrp":6,
    "year":2012,
    "sex":"MAL",
    "n":4642
  },
  {
    "agegrp":6,
    "year":2013,
    "sex":"FEM",
    "n":4159
  },
  {
    "agegrp":6,
    "year":2013,
    "sex":"MAL",
    "n":4331
  },
  {
    "agegrp":6,
    "year":2014,
    "sex":"FEM",
    "n":3785
  },
  {
    "agegrp":6,
    "year":2014,
    "sex":"MAL",
    "n":3906
  },
  {
    "agegrp":7,
    "year":2000,
    "sex":"FEM",
    "n":4770
  },
  {
    "agegrp":7,
    "year":2000,
    "sex":"MAL",
    "n":4949
  },
  {
    "agegrp":7,
    "year":2001,
    "sex":"FEM",
    "n":5053
  },
  {
    "agegrp":7,
    "year":2001,
    "sex":"MAL",
    "n":5082
  },
  {
    "agegrp":7,
    "year":2002,
    "sex":"FEM",
    "n":5044
  },
  {
    "agegrp":7,
    "year":2002,
    "sex":"MAL",
    "n":5164
  },
  {
    "agegrp":7,
    "year":2003,
    "sex":"FEM",
    "n":5033
  },
  {
    "agegrp":7,
    "year":2003,
    "sex":"MAL",
    "n":5067
  },
  {
    "agegrp":7,
    "year":2004,
    "sex":"FEM",
    "n":4827
  },
  {
    "agegrp":7,
    "year":2004,
    "sex":"MAL",
    "n":4921
  },
  {
    "agegrp":7,
    "year":2005,
    "sex":"FEM",
    "n":4732
  },
  {
    "agegrp":7,
    "year":2005,
    "sex":"MAL",
    "n":4702
  },
  {
    "agegrp":7,
    "year":2006,
    "sex":"FEM",
    "n":4483
  },
  {
    "agegrp":7,
    "year":2006,
    "sex":"MAL",
    "n":4523
  },
  {
    "agegrp":7,
    "year":2007,
    "sex":"FEM",
    "n":4477
  },
  {
    "agegrp":7,
    "year":2007,
    "sex":"MAL",
    "n":4626
  },
  {
    "agegrp":7,
    "year":2008,
    "sex":"FEM",
    "n":4329
  },
  {
    "agegrp":7,
    "year":2008,
    "sex":"MAL",
    "n":4492
  },
  {
    "agegrp":7,
    "year":2009,
    "sex":"FEM",
    "n":4360
  },
  {
    "agegrp":7,
    "year":2009,
    "sex":"MAL",
    "n":4464
  },
  {
    "agegrp":7,
    "year":2010,
    "sex":"FEM",
    "n":4554
  },
  {
    "agegrp":7,
    "year":2010,
    "sex":"MAL",
    "n":4649
  },
  {
    "agegrp":7,
    "year":2011,
    "sex":"FEM",
    "n":4561
  },
  {
    "agegrp":7,
    "year":2011,
    "sex":"MAL",
    "n":4765
  },
  {
    "agegrp":7,
    "year":2012,
    "sex":"FEM",
    "n":4662
  },
  {
    "agegrp":7,
    "year":2012,
    "sex":"MAL",
    "n":4777
  },
  {
    "agegrp":7,
    "year":2013,
    "sex":"FEM",
    "n":4640
  },
  {
    "agegrp":7,
    "year":2013,
    "sex":"MAL",
    "n":4744
  },
  {
    "agegrp":7,
    "year":2014,
    "sex":"FEM",
    "n":4554
  },
  {
    "agegrp":7,
    "year":2014,
    "sex":"MAL",
    "n":4598
  },
  {
    "agegrp":8,
    "year":2000,
    "sex":"FEM",
    "n":4813
  },
  {
    "agegrp":8,
    "year":2000,
    "sex":"MAL",
    "n":4921
  },
  {
    "agegrp":8,
    "year":2001,
    "sex":"FEM",
    "n":5046
  },
  {
    "agegrp":8,
    "year":2001,
    "sex":"MAL",
    "n":5219
  },
  {
    "agegrp":8,
    "year":2002,
    "sex":"FEM",
    "n":5141
  },
  {
    "agegrp":8,
    "year":2002,
    "sex":"MAL",
    "n":5180
  },
  {
    "agegrp":8,
    "year":2003,
    "sex":"FEM",
    "n":5139
  },
  {
    "agegrp":8,
    "year":2003,
    "sex":"MAL",
    "n":5190
  },
  {
    "agegrp":8,
    "year":2004,
    "sex":"FEM",
    "n":5086
  },
  {
    "agegrp":8,
    "year":2004,
    "sex":"MAL",
    "n":5085
  },
  {
    "agegrp":8,
    "year":2005,
    "sex":"FEM",
    "n":4905
  },
  {
    "agegrp":8,
    "year":2005,
    "sex":"MAL",
    "n":5015
  },
  {
    "agegrp":8,
    "year":2006,
    "sex":"FEM",
    "n":4865
  },
  {
    "agegrp":8,
    "year":2006,
    "sex":"MAL",
    "n":4932
  },
  {
    "agegrp":8,
    "year":2007,
    "sex":"FEM",
    "n":4937
  },
  {
    "agegrp":8,
    "year":2007,
    "sex":"MAL",
    "n":5095
  },
  {
    "agegrp":8,
    "year":2008,
    "sex":"FEM",
    "n":4860
  },
  {
    "agegrp":8,
    "year":2008,
    "sex":"MAL",
    "n":4950
  },
  {
    "agegrp":8,
    "year":2009,
    "sex":"FEM",
    "n":4633
  },
  {
    "agegrp":8,
    "year":2009,
    "sex":"MAL",
    "n":4828
  },
  {
    "agegrp":8,
    "year":2010,
    "sex":"FEM",
    "n":4591
  },
  {
    "agegrp":8,
    "year":2010,
    "sex":"MAL",
    "n":4637
  },
  {
    "agegrp":8,
    "year":2011,
    "sex":"FEM",
    "n":4435
  },
  {
    "agegrp":8,
    "year":2011,
    "sex":"MAL",
    "n":4444
  },
  {
    "agegrp":8,
    "year":2012,
    "sex":"FEM",
    "n":4214
  },
  {
    "agegrp":8,
    "year":2012,
    "sex":"MAL",
    "n":4301
  },
  {
    "agegrp":8,
    "year":2013,
    "sex":"FEM",
    "n":3974
  },
  {
    "agegrp":8,
    "year":2013,
    "sex":"MAL",
    "n":4113
  },
  {
    "agegrp":8,
    "year":2014,
    "sex":"FEM",
    "n":3816
  },
  {
    "agegrp":8,
    "year":2014,
    "sex":"MAL",
    "n":3953
  },
  {
    "agegrp":9,
    "year":2000,
    "sex":"FEM",
    "n":4216
  },
  {
    "agegrp":9,
    "year":2000,
    "sex":"MAL",
    "n":4145
  },
  {
    "agegrp":9,
    "year":2001,
    "sex":"FEM",
    "n":4703
  },
  {
    "agegrp":9,
    "year":2001,
    "sex":"MAL",
    "n":4621
  },
  {
    "agegrp":9,
    "year":2002,
    "sex":"FEM",
    "n":4757
  },
  {
    "agegrp":9,
    "year":2002,
    "sex":"MAL",
    "n":4736
  },
  {
    "agegrp":9,
    "year":2003,
    "sex":"FEM",
    "n":4647
  },
  {
    "agegrp":9,
    "year":2003,
    "sex":"MAL",
    "n":4632
  },
  {
    "agegrp":9,
    "year":2004,
    "sex":"FEM",
    "n":4568
  },
  {
    "agegrp":9,
    "year":2004,
    "sex":"MAL",
    "n":4616
  },
  {
    "agegrp":9,
    "year":2005,
    "sex":"FEM",
    "n":4521
  },
  {
    "agegrp":9,
    "year":2005,
    "sex":"MAL",
    "n":4594
  },
  {
    "agegrp":9,
    "year":2006,
    "sex":"FEM",
    "n":4456
  },
  {
    "agegrp":9,
    "year":2006,
    "sex":"MAL",
    "n":4591
  },
  {
    "agegrp":9,
    "year":2007,
    "sex":"FEM",
    "n":4610
  },
  {
    "agegrp":9,
    "year":2007,
    "sex":"MAL",
    "n":4616
  },
  {
    "agegrp":9,
    "year":2008,
    "sex":"FEM",
    "n":4638
  },
  {
    "agegrp":9,
    "year":2008,
    "sex":"MAL",
    "n":4623
  },
  {
    "agegrp":9,
    "year":2009,
    "sex":"FEM",
    "n":4579
  },
  {
    "agegrp":9,
    "year":2009,
    "sex":"MAL",
    "n":4617
  },
  {
    "agegrp":9,
    "year":2010,
    "sex":"FEM",
    "n":4432
  },
  {
    "agegrp":9,
    "year":2010,
    "sex":"MAL",
    "n":4594
  },
  {
    "agegrp":9,
    "year":2011,
    "sex":"FEM",
    "n":4350
  },
  {
    "agegrp":9,
    "year":2011,
    "sex":"MAL",
    "n":4553
  },
  {
    "agegrp":9,
    "year":2012,
    "sex":"FEM",
    "n":4179
  },
  {
    "agegrp":9,
    "year":2012,
    "sex":"MAL",
    "n":4422
  },
  {
    "agegrp":9,
    "year":2013,
    "sex":"FEM",
    "n":4040
  },
  {
    "agegrp":9,
    "year":2013,
    "sex":"MAL",
    "n":4205
  },
  {
    "agegrp":9,
    "year":2014,
    "sex":"FEM",
    "n":3854
  },
  {
    "agegrp":9,
    "year":2014,
    "sex":"MAL",
    "n":4011
  },
  {
    "agegrp":10,
    "year":2000,
    "sex":"FEM",
    "n":2824
  },
  {
    "agegrp":10,
    "year":2000,
    "sex":"MAL",
    "n":2315
  },
  {
    "agegrp":10,
    "year":2001,
    "sex":"FEM",
    "n":3085
  },
  {
    "agegrp":10,
    "year":2001,
    "sex":"MAL",
    "n":2543
  },
  {
    "agegrp":10,
    "year":2002,
    "sex":"FEM",
    "n":3196
  },
  {
    "agegrp":10,
    "year":2002,
    "sex":"MAL",
    "n":2573
  },
  {
    "agegrp":10,
    "year":2003,
    "sex":"FEM",
    "n":3217
  },
  {
    "agegrp":10,
    "year":2003,
    "sex":"MAL",
    "n":2647
  },
  {
    "agegrp":10,
    "year":2004,
    "sex":"FEM",
    "n":3325
  },
  {
    "agegrp":10,
    "year":2004,
    "sex":"MAL",
    "n":2657
  },
  {
    "agegrp":10,
    "year":2005,
    "sex":"FEM",
    "n":3392
  },
  {
    "agegrp":10,
    "year":2005,
    "sex":"MAL",
    "n":2745
  },
  {
    "agegrp":10,
    "year":2006,
    "sex":"FEM",
    "n":3411
  },
  {
    "agegrp":10,
    "year":2006,
    "sex":"MAL",
    "n":2779
  },
  {
    "agegrp":10,
    "year":2007,
    "sex":"FEM",
    "n":3486
  },
  {
    "agegrp":10,
    "year":2007,
    "sex":"MAL",
    "n":2886
  },
  {
    "agegrp":10,
    "year":2008,
    "sex":"FEM",
    "n":3399
  },
  {
    "agegrp":10,
    "year":2008,
    "sex":"MAL",
    "n":2905
  },
  {
    "agegrp":10,
    "year":2009,
    "sex":"FEM",
    "n":3492
  },
  {
    "agegrp":10,
    "year":2009,
    "sex":"MAL",
    "n":2980
  },
  {
    "agegrp":10,
    "year":2010,
    "sex":"FEM",
    "n":3432
  },
  {
    "agegrp":10,
    "year":2010,
    "sex":"MAL",
    "n":3050
  },
  {
    "agegrp":10,
    "year":2011,
    "sex":"FEM",
    "n":3457
  },
  {
    "agegrp":10,
    "year":2011,
    "sex":"MAL",
    "n":3137
  },
  {
    "agegrp":10,
    "year":2012,
    "sex":"FEM",
    "n":3235
  },
  {
    "agegrp":10,
    "year":2012,
    "sex":"MAL",
    "n":2989
  },
  {
    "agegrp":10,
    "year":2013,
    "sex":"FEM",
    "n":3080
  },
  {
    "agegrp":10,
    "year":2013,
    "sex":"MAL",
    "n":2845
  },
  {
    "agegrp":10,
    "year":2014,
    "sex":"FEM",
    "n":2877
  },
  {
    "agegrp":10,
    "year":2014,
    "sex":"MAL",
    "n":2731
  },
  {
    "agegrp":11,
    "year":2000,
    "sex":"FEM",
    "n":2259
  },
  {
    "agegrp":11,
    "year":2000,
    "sex":"MAL",
    "n":1627
  },
  {
    "agegrp":11,
    "year":2001,
    "sex":"FEM",
    "n":2602
  },
  {
    "agegrp":11,
    "year":2001,
    "sex":"MAL",
    "n":1808
  },
  {
    "agegrp":11,
    "year":2002,
    "sex":"FEM",
    "n":2635
  },
  {
    "agegrp":11,
    "year":2002,
    "sex":"MAL",
    "n":1756
  },
  {
    "agegrp":11,
    "year":2003,
    "sex":"FEM",
    "n":2416
  },
  {
    "agegrp":11,
    "year":2003,
    "sex":"MAL",
    "n":1650
  },
  {
    "agegrp":11,
    "year":2004,
    "sex":"FEM",
    "n":2334
  },
  {
    "agegrp":11,
    "year":2004,
    "sex":"MAL",
    "n":1612
  },
  {
    "agegrp":11,
    "year":2005,
    "sex":"FEM",
    "n":2261
  },
  {
    "agegrp":11,
    "year":2005,
    "sex":"MAL",
    "n":1597
  },
  {
    "agegrp":11,
    "year":2006,
    "sex":"FEM",
    "n":2232
  },
  {
    "agegrp":11,
    "year":2006,
    "sex":"MAL",
    "n":1542
  },
  {
    "agegrp":11,
    "year":2007,
    "sex":"FEM",
    "n":2350
  },
  {
    "agegrp":11,
    "year":2007,
    "sex":"MAL",
    "n":1673
  },
  {
    "agegrp":11,
    "year":2008,
    "sex":"FEM",
    "n":2559
  },
  {
    "agegrp":11,
    "year":2008,
    "sex":"MAL",
    "n":1779
  },
  {
    "agegrp":11,
    "year":2009,
    "sex":"FEM",
    "n":2741
  },
  {
    "agegrp":11,
    "year":2009,
    "sex":"MAL",
    "n":1937
  },
  {
    "agegrp":11,
    "year":2010,
    "sex":"FEM",
    "n":2895
  },
  {
    "agegrp":11,
    "year":2010,
    "sex":"MAL",
    "n":2114
  },
  {
    "agegrp":11,
    "year":2011,
    "sex":"FEM",
    "n":2931
  },
  {
    "agegrp":11,
    "year":2011,
    "sex":"MAL",
    "n":2265
  },
  {
    "agegrp":11,
    "year":2012,
    "sex":"FEM",
    "n":2795
  },
  {
    "agegrp":11,
    "year":2012,
    "sex":"MAL",
    "n":2257
  },
  {
    "agegrp":11,
    "year":2013,
    "sex":"FEM",
    "n":2681
  },
  {
    "agegrp":11,
    "year":2013,
    "sex":"MAL",
    "n":2202
  },
  {
    "agegrp":11,
    "year":2014,
    "sex":"FEM",
    "n":2678
  },
  {
    "agegrp":11,
    "year":2014,
    "sex":"MAL",
    "n":2163
  },
  {
    "agegrp":12,
    "year":2000,
    "sex":"FEM",
    "n":1956
  },
  {
    "agegrp":12,
    "year":2000,
    "sex":"MAL",
    "n":1322
  },
  {
    "agegrp":12,
    "year":2001,
    "sex":"FEM",
    "n":2089
  },
  {
    "agegrp":12,
    "year":2001,
    "sex":"MAL",
    "n":1393
  },
  {
    "agegrp":12,
    "year":2002,
    "sex":"FEM",
    "n":2136
  },
  {
    "agegrp":12,
    "year":2002,
    "sex":"MAL",
    "n":1407
  },
  {
    "agegrp":12,
    "year":2003,
    "sex":"FEM",
    "n":2031
  },
  {
    "agegrp":12,
    "year":2003,
    "sex":"MAL",
    "n":1334
  },
  {
    "agegrp":12,
    "year":2004,
    "sex":"FEM",
    "n":1949
  },
  {
    "agegrp":12,
    "year":2004,
    "sex":"MAL",
    "n":1251
  },
  {
    "agegrp":12,
    "year":2005,
    "sex":"FEM",
    "n":1895
  },
  {
    "agegrp":12,
    "year":2005,
    "sex":"MAL",
    "n":1231
  },
  {
    "agegrp":12,
    "year":2006,
    "sex":"FEM",
    "n":1975
  },
  {
    "agegrp":12,
    "year":2006,
    "sex":"MAL",
    "n":1239
  },
  {
    "agegrp":12,
    "year":2007,
    "sex":"FEM",
    "n":2129
  },
  {
    "agegrp":12,
    "year":2007,
    "sex":"MAL",
    "n":1355
  },
  {
    "agegrp":12,
    "year":2008,
    "sex":"FEM",
    "n":2062
  },
  {
    "agegrp":12,
    "year":2008,
    "sex":"MAL",
    "n":1349
  },
  {
    "agegrp":12,
    "year":2009,
    "sex":"FEM",
    "n":2090
  },
  {
    "agegrp":12,
    "year":2009,
    "sex":"MAL",
    "n":1418
  },
  {
    "agegrp":12,
    "year":2010,
    "sex":"FEM",
    "n":2143
  },
  {
    "agegrp":12,
    "year":2010,
    "sex":"MAL",
    "n":1524
  },
  {
    "agegrp":12,
    "year":2011,
    "sex":"FEM",
    "n":2078
  },
  {
    "agegrp":12,
    "year":2011,
    "sex":"MAL",
    "n":1504
  },
  {
    "agegrp":12,
    "year":2012,
    "sex":"FEM",
    "n":2090
  },
  {
    "agegrp":12,
    "year":2012,
    "sex":"MAL",
    "n":1569
  },
  {
    "agegrp":12,
    "year":2013,
    "sex":"FEM",
    "n":2173
  },
  {
    "agegrp":12,
    "year":2013,
    "sex":"MAL",
    "n":1622
  },
  {
    "agegrp":12,
    "year":2014,
    "sex":"FEM",
    "n":2210
  },
  {
    "agegrp":12,
    "year":2014,
    "sex":"MAL",
    "n":1617
  },
  {
    "agegrp":13,
    "year":2000,
    "sex":"FEM",
    "n":1895
  },
  {
    "agegrp":13,
    "year":2000,
    "sex":"MAL",
    "n":1201
  },
  {
    "agegrp":13,
    "year":2001,
    "sex":"FEM",
    "n":1920
  },
  {
    "agegrp":13,
    "year":2001,
    "sex":"MAL",
    "n":1202
  },
  {
    "agegrp":13,
    "year":2002,
    "sex":"FEM",
    "n":1885
  },
  {
    "agegrp":13,
    "year":2002,
    "sex":"MAL",
    "n":1178
  },
  {
    "agegrp":13,
    "year":2003,
    "sex":"FEM",
    "n":1765
  },
  {
    "agegrp":13,
    "year":2003,
    "sex":"MAL",
    "n":1089
  },
  {
    "agegrp":13,
    "year":2004,
    "sex":"FEM",
    "n":1750
  },
  {
    "agegrp":13,
    "year":2004,
    "sex":"MAL",
    "n":1075
  },
  {
    "agegrp":13,
    "year":2005,
    "sex":"FEM",
    "n":1748
  },
  {
    "agegrp":13,
    "year":2005,
    "sex":"MAL",
    "n":1087
  },
  {
    "agegrp":13,
    "year":2006,
    "sex":"FEM",
    "n":1689
  },
  {
    "agegrp":13,
    "year":2006,
    "sex":"MAL",
    "n":1046
  },
  {
    "agegrp":13,
    "year":2007,
    "sex":"FEM",
    "n":1771
  },
  {
    "agegrp":13,
    "year":2007,
    "sex":"MAL",
    "n":1073
  },
  {
    "agegrp":13,
    "year":2008,
    "sex":"FEM",
    "n":1770
  },
  {
    "agegrp":13,
    "year":2008,
    "sex":"MAL",
    "n":1140
  },
  {
    "agegrp":13,
    "year":2009,
    "sex":"FEM",
    "n":1803
  },
  {
    "agegrp":13,
    "year":2009,
    "sex":"MAL",
    "n":1134
  },
  {
    "agegrp":13,
    "year":2010,
    "sex":"FEM",
    "n":1820
  },
  {
    "agegrp":13,
    "year":2010,
    "sex":"MAL",
    "n":1183
  },
  {
    "agegrp":13,
    "year":2011,
    "sex":"FEM",
    "n":1874
  },
  {
    "agegrp":13,
    "year":2011,
    "sex":"MAL",
    "n":1248
  },
  {
    "agegrp":13,
    "year":2012,
    "sex":"FEM",
    "n":1849
  },
  {
    "agegrp":13,
    "year":2012,
    "sex":"MAL",
    "n":1218
  },
  {
    "agegrp":13,
    "year":2013,
    "sex":"FEM",
    "n":1771
  },
  {
    "agegrp":13,
    "year":2013,
    "sex":"MAL",
    "n":1197
  },
  {
    "agegrp":13,
    "year":2014,
    "sex":"FEM",
    "n":1710
  },
  {
    "agegrp":13,
    "year":2014,
    "sex":"MAL",
    "n":1194
  },
  {
    "agegrp":14,
    "year":2000,
    "sex":"FEM",
    "n":1660
  },
  {
    "agegrp":14,
    "year":2000,
    "sex":"MAL",
    "n":1004
  },
  {
    "agegrp":14,
    "year":2001,
    "sex":"FEM",
    "n":1776
  },
  {
    "agegrp":14,
    "year":2001,
    "sex":"MAL",
    "n":1039
  },
  {
    "agegrp":14,
    "year":2002,
    "sex":"FEM",
    "n":1819
  },
  {
    "agegrp":14,
    "year":2002,
    "sex":"MAL",
    "n":995
  },
  {
    "agegrp":14,
    "year":2003,
    "sex":"FEM",
    "n":1753
  },
  {
    "agegrp":14,
    "year":2003,
    "sex":"MAL",
    "n":962
  },
  {
    "agegrp":14,
    "year":2004,
    "sex":"FEM",
    "n":1725
  },
  {
    "agegrp":14,
    "year":2004,
    "sex":"MAL",
    "n":969
  },
  {
    "agegrp":14,
    "year":2005,
    "sex":"FEM",
    "n":1679
  },
  {
    "agegrp":14,
    "year":2005,
    "sex":"MAL",
    "n":937
  },
  {
    "agegrp":14,
    "year":2006,
    "sex":"FEM",
    "n":1597
  },
  {
    "agegrp":14,
    "year":2006,
    "sex":"MAL",
    "n":908
  },
  {
    "agegrp":14,
    "year":2007,
    "sex":"FEM",
    "n":1652
  },
  {
    "agegrp":14,
    "year":2007,
    "sex":"MAL",
    "n":967
  },
  {
    "agegrp":14,
    "year":2008,
    "sex":"FEM",
    "n":1609
  },
  {
    "agegrp":14,
    "year":2008,
    "sex":"MAL",
    "n":920
  },
  {
    "agegrp":14,
    "year":2009,
    "sex":"FEM",
    "n":1624
  },
  {
    "agegrp":14,
    "year":2009,
    "sex":"MAL",
    "n":932
  },
  {
    "agegrp":14,
    "year":2010,
    "sex":"FEM",
    "n":1596
  },
  {
    "agegrp":14,
    "year":2010,
    "sex":"MAL",
    "n":949
  },
  {
    "agegrp":14,
    "year":2011,
    "sex":"FEM",
    "n":1584
  },
  {
    "agegrp":14,
    "year":2011,
    "sex":"MAL",
    "n":961
  },
  {
    "agegrp":14,
    "year":2012,
    "sex":"FEM",
    "n":1559
  },
  {
    "agegrp":14,
    "year":2012,
    "sex":"MAL",
    "n":944
  },
  {
    "agegrp":14,
    "year":2013,
    "sex":"FEM",
    "n":1565
  },
  {
    "agegrp":14,
    "year":2013,
    "sex":"MAL",
    "n":957
  },
  {
    "agegrp":14,
    "year":2014,
    "sex":"FEM",
    "n":1511
  },
  {
    "agegrp":14,
    "year":2014,
    "sex":"MAL",
    "n":904
  },
  {
    "agegrp":15,
    "year":2000,
    "sex":"FEM",
    "n":1090
  },
  {
    "agegrp":15,
    "year":2000,
    "sex":"MAL",
    "n":797
  },
  {
    "agegrp":15,
    "year":2001,
    "sex":"FEM",
    "n":1180
  },
  {
    "agegrp":15,
    "year":2001,
    "sex":"MAL",
    "n":813
  },
  {
    "agegrp":15,
    "year":2002,
    "sex":"FEM",
    "n":1294
  },
  {
    "agegrp":15,
    "year":2002,
    "sex":"MAL",
    "n":822
  },
  {
    "agegrp":15,
    "year":2003,
    "sex":"FEM",
    "n":1387
  },
  {
    "agegrp":15,
    "year":2003,
    "sex":"MAL",
    "n":834
  },
  {
    "agegrp":15,
    "year":2004,
    "sex":"FEM",
    "n":1478
  },
  {
    "agegrp":15,
    "year":2004,
    "sex":"MAL",
    "n":797
  },
  {
    "agegrp":15,
    "year":2005,
    "sex":"FEM",
    "n":1545
  },
  {
    "agegrp":15,
    "year":2005,
    "sex":"MAL",
    "n":777
  },
  {
    "agegrp":15,
    "year":2006,
    "sex":"FEM",
    "n":1565
  },
  {
    "agegrp":15,
    "year":2006,
    "sex":"MAL",
    "n":783
  },
  {
    "agegrp":15,
    "year":2007,
    "sex":"FEM",
    "n":1627
  },
  {
    "agegrp":15,
    "year":2007,
    "sex":"MAL",
    "n":786
  },
  {
    "agegrp":15,
    "year":2008,
    "sex":"FEM",
    "n":1638
  },
  {
    "agegrp":15,
    "year":2008,
    "sex":"MAL",
    "n":829
  },
  {
    "agegrp":15,
    "year":2009,
    "sex":"FEM",
    "n":1616
  },
  {
    "agegrp":15,
    "year":2009,
    "sex":"MAL",
    "n":822
  },
  {
    "agegrp":15,
    "year":2010,
    "sex":"FEM",
    "n":1604
  },
  {
    "agegrp":15,
    "year":2010,
    "sex":"MAL",
    "n":835
  },
  {
    "agegrp":15,
    "year":2011,
    "sex":"FEM",
    "n":1560
  },
  {
    "agegrp":15,
    "year":2011,
    "sex":"MAL",
    "n":820
  },
  {
    "agegrp":15,
    "year":2012,
    "sex":"FEM",
    "n":1505
  },
  {
    "agegrp":15,
    "year":2012,
    "sex":"MAL",
    "n":814
  },
  {
    "agegrp":15,
    "year":2013,
    "sex":"FEM",
    "n":1403
  },
  {
    "agegrp":15,
    "year":2013,
    "sex":"MAL",
    "n":745
  },
  {
    "agegrp":15,
    "year":2014,
    "sex":"FEM",
    "n":1416
  },
  {
    "agegrp":15,
    "year":2014,
    "sex":"MAL",
    "n":742
  },
  {
    "agegrp":16,
    "year":2000,
    "sex":"FEM",
    "n":1067
  },
  {
    "agegrp":16,
    "year":2000,
    "sex":"MAL",
    "n":605
  },
  {
    "agegrp":16,
    "year":2001,
    "sex":"FEM",
    "n":1109
  },
  {
    "agegrp":16,
    "year":2001,
    "sex":"MAL",
    "n":625
  },
  {
    "agegrp":16,
    "year":2002,
    "sex":"FEM",
    "n":1119
  },
  {
    "agegrp":16,
    "year":2002,
    "sex":"MAL",
    "n":629
  },
  {
    "agegrp":16,
    "year":2003,
    "sex":"FEM",
    "n":1146
  },
  {
    "agegrp":16,
    "year":2003,
    "sex":"MAL",
    "n":667
  },
  {
    "agegrp":16,
    "year":2004,
    "sex":"FEM",
    "n":1111
  },
  {
    "agegrp":16,
    "year":2004,
    "sex":"MAL",
    "n":658
  },
  {
    "agegrp":16,
    "year":2005,
    "sex":"FEM",
    "n":1050
  },
  {
    "agegrp":16,
    "year":2005,
    "sex":"MAL",
    "n":665
  },
  {
    "agegrp":16,
    "year":2006,
    "sex":"FEM",
    "n":1103
  },
  {
    "agegrp":16,
    "year":2006,
    "sex":"MAL",
    "n":649
  },
  {
    "agegrp":16,
    "year":2007,
    "sex":"FEM",
    "n":1196
  },
  {
    "agegrp":16,
    "year":2007,
    "sex":"MAL",
    "n":697
  },
  {
    "agegrp":16,
    "year":2008,
    "sex":"FEM",
    "n":1288
  },
  {
    "agegrp":16,
    "year":2008,
    "sex":"MAL",
    "n":693
  },
  {
    "agegrp":16,
    "year":2009,
    "sex":"FEM",
    "n":1371
  },
  {
    "agegrp":16,
    "year":2009,
    "sex":"MAL",
    "n":682
  },
  {
    "agegrp":16,
    "year":2010,
    "sex":"FEM",
    "n":1457
  },
  {
    "agegrp":16,
    "year":2010,
    "sex":"MAL",
    "n":694
  },
  {
    "agegrp":16,
    "year":2011,
    "sex":"FEM",
    "n":1504
  },
  {
    "agegrp":16,
    "year":2011,
    "sex":"MAL",
    "n":720
  },
  {
    "agegrp":16,
    "year":2012,
    "sex":"FEM",
    "n":1508
  },
  {
    "agegrp":16,
    "year":2012,
    "sex":"MAL",
    "n":699
  },
  {
    "agegrp":16,
    "year":2013,
    "sex":"FEM",
    "n":1499
  },
  {
    "agegrp":16,
    "year":2013,
    "sex":"MAL",
    "n":727
  },
  {
    "agegrp":16,
    "year":2014,
    "sex":"FEM",
    "n":1426
  },
  {
    "agegrp":16,
    "year":2014,
    "sex":"MAL",
    "n":700
  },
  {
    "agegrp":17,
    "year":2000,
    "sex":"FEM",
    "n":849
  },
  {
    "agegrp":17,
    "year":2000,
    "sex":"MAL",
    "n":475
  },
  {
    "agegrp":17,
    "year":2001,
    "sex":"FEM",
    "n":780
  },
  {
    "agegrp":17,
    "year":2001,
    "sex":"MAL",
    "n":451
  },
  {
    "agegrp":17,
    "year":2002,
    "sex":"FEM",
    "n":768
  },
  {
    "agegrp":17,
    "year":2002,
    "sex":"MAL",
    "n":460
  },
  {
    "agegrp":17,
    "year":2003,
    "sex":"FEM",
    "n":764
  },
  {
    "agegrp":17,
    "year":2003,
    "sex":"MAL",
    "n":442
  },
  {
    "agegrp":17,
    "year":2004,
    "sex":"FEM",
    "n":875
  },
  {
    "agegrp":17,
    "year":2004,
    "sex":"MAL",
    "n":471
  },
  {
    "agegrp":17,
    "year":2005,
    "sex":"FEM",
    "n":994
  },
  {
    "agegrp":17,
    "year":2005,
    "sex":"MAL",
    "n":495
  },
  {
    "agegrp":17,
    "year":2006,
    "sex":"FEM",
    "n":999
  },
  {
    "agegrp":17,
    "year":2006,
    "sex":"MAL",
    "n":500
  },
  {
    "agegrp":17,
    "year":2007,
    "sex":"FEM",
    "n":1026
  },
  {
    "agegrp":17,
    "year":2007,
    "sex":"MAL",
    "n":530
  },
  {
    "agegrp":17,
    "year":2008,
    "sex":"FEM",
    "n":1049
  },
  {
    "agegrp":17,
    "year":2008,
    "sex":"MAL",
    "n":576
  },
  {
    "agegrp":17,
    "year":2009,
    "sex":"FEM",
    "n":1016
  },
  {
    "agegrp":17,
    "year":2009,
    "sex":"MAL",
    "n":586
  },
  {
    "agegrp":17,
    "year":2010,
    "sex":"FEM",
    "n":979
  },
  {
    "agegrp":17,
    "year":2010,
    "sex":"MAL",
    "n":566
  },
  {
    "agegrp":17,
    "year":2011,
    "sex":"FEM",
    "n":1031
  },
  {
    "agegrp":17,
    "year":2011,
    "sex":"MAL",
    "n":576
  },
  {
    "agegrp":17,
    "year":2012,
    "sex":"FEM",
    "n":1093
  },
  {
    "agegrp":17,
    "year":2012,
    "sex":"MAL",
    "n":579
  },
  {
    "agegrp":17,
    "year":2013,
    "sex":"FEM",
    "n":1152
  },
  {
    "agegrp":17,
    "year":2013,
    "sex":"MAL",
    "n":568
  },
  {
    "agegrp":17,
    "year":2014,
    "sex":"FEM",
    "n":1219
  },
  {
    "agegrp":17,
    "year":2014,
    "sex":"MAL",
    "n":571
  },
  {
    "agegrp":18,
    "year":2000,
    "sex":"FEM",
    "n":883
  },
  {
    "agegrp":18,
    "year":2000,
    "sex":"MAL",
    "n":428
  },
  {
    "agegrp":18,
    "year":2001,
    "sex":"FEM",
    "n":946
  },
  {
    "agegrp":18,
    "year":2001,
    "sex":"MAL",
    "n":455
  },
  {
    "agegrp":18,
    "year":2002,
    "sex":"FEM",
    "n":964
  },
  {
    "agegrp":18,
    "year":2002,
    "sex":"MAL",
    "n":462
  },
  {
    "agegrp":18,
    "year":2003,
    "sex":"FEM",
    "n":977
  },
  {
    "agegrp":18,
    "year":2003,
    "sex":"MAL",
    "n":469
  },
  {
    "agegrp":18,
    "year":2004,
    "sex":"FEM",
    "n":877
  },
  {
    "agegrp":18,
    "year":2004,
    "sex":"MAL",
    "n":446
  },
  {
    "agegrp":18,
    "year":2005,
    "sex":"FEM",
    "n":763
  },
  {
    "agegrp":18,
    "year":2005,
    "sex":"MAL",
    "n":415
  },
  {
    "agegrp":18,
    "year":2006,
    "sex":"FEM",
    "n":689
  },
  {
    "agegrp":18,
    "year":2006,
    "sex":"MAL",
    "n":386
  },
  {
    "agegrp":18,
    "year":2007,
    "sex":"FEM",
    "n":679
  },
  {
    "agegrp":18,
    "year":2007,
    "sex":"MAL",
    "n":385
  },
  {
    "agegrp":18,
    "year":2008,
    "sex":"FEM",
    "n":678
  },
  {
    "agegrp":18,
    "year":2008,
    "sex":"MAL",
    "n":362
  },
  {
    "agegrp":18,
    "year":2009,
    "sex":"FEM",
    "n":774
  },
  {
    "agegrp":18,
    "year":2009,
    "sex":"MAL",
    "n":404
  },
  {
    "agegrp":18,
    "year":2010,
    "sex":"FEM",
    "n":891
  },
  {
    "agegrp":18,
    "year":2010,
    "sex":"MAL",
    "n":428
  },
  {
    "agegrp":18,
    "year":2011,
    "sex":"FEM",
    "n":904
  },
  {
    "agegrp":18,
    "year":2011,
    "sex":"MAL",
    "n":448
  },
  {
    "agegrp":18,
    "year":2012,
    "sex":"FEM",
    "n":891
  },
  {
    "agegrp":18,
    "year":2012,
    "sex":"MAL",
    "n":456
  },
  {
    "agegrp":18,
    "year":2013,
    "sex":"FEM",
    "n":923
  },
  {
    "agegrp":18,
    "year":2013,
    "sex":"MAL",
    "n":483
  },
  {
    "agegrp":18,
    "year":2014,
    "sex":"FEM",
    "n":885
  },
  {
    "agegrp":18,
    "year":2014,
    "sex":"MAL",
    "n":486
  },
  {
    "agegrp":19,
    "year":2000,
    "sex":"FEM",
    "n":810
  },
  {
    "agegrp":19,
    "year":2000,
    "sex":"MAL",
    "n":316
  },
  {
    "agegrp":19,
    "year":2001,
    "sex":"FEM",
    "n":773
  },
  {
    "agegrp":19,
    "year":2001,
    "sex":"MAL",
    "n":282
  },
  {
    "agegrp":19,
    "year":2002,
    "sex":"FEM",
    "n":734
  },
  {
    "agegrp":19,
    "year":2002,
    "sex":"MAL",
    "n":295
  },
  {
    "agegrp":19,
    "year":2003,
    "sex":"FEM",
    "n":693
  },
  {
    "agegrp":19,
    "year":2003,
    "sex":"MAL",
    "n":285
  },
  {
    "agegrp":19,
    "year":2004,
    "sex":"FEM",
    "n":708
  },
  {
    "agegrp":19,
    "year":2004,
    "sex":"MAL",
    "n":300
  },
  {
    "agegrp":19,
    "year":2005,
    "sex":"FEM",
    "n":788
  },
  {
    "agegrp":19,
    "year":2005,
    "sex":"MAL",
    "n":341
  },
  {
    "agegrp":19,
    "year":2006,
    "sex":"FEM",
    "n":820
  },
  {
    "agegrp":19,
    "year":2006,
    "sex":"MAL",
    "n":372
  },
  {
    "agegrp":19,
    "year":2007,
    "sex":"FEM",
    "n":845
  },
  {
    "agegrp":19,
    "year":2007,
    "sex":"MAL",
    "n":381
  },
  {
    "agegrp":19,
    "year":2008,
    "sex":"FEM",
    "n":846
  },
  {
    "agegrp":19,
    "year":2008,
    "sex":"MAL",
    "n":400
  },
  {
    "agegrp":19,
    "year":2009,
    "sex":"FEM",
    "n":769
  },
  {
    "agegrp":19,
    "year":2009,
    "sex":"MAL",
    "n":376
  },
  {
    "agegrp":19,
    "year":2010,
    "sex":"FEM",
    "n":672
  },
  {
    "agegrp":19,
    "year":2010,
    "sex":"MAL",
    "n":333
  },
  {
    "agegrp":19,
    "year":2011,
    "sex":"FEM",
    "n":603
  },
  {
    "agegrp":19,
    "year":2011,
    "sex":"MAL",
    "n":329
  },
  {
    "agegrp":19,
    "year":2012,
    "sex":"FEM",
    "n":590
  },
  {
    "agegrp":19,
    "year":2012,
    "sex":"MAL",
    "n":318
  },
  {
    "agegrp":19,
    "year":2013,
    "sex":"FEM",
    "n":584
  },
  {
    "agegrp":19,
    "year":2013,
    "sex":"MAL",
    "n":298
  },
  {
    "agegrp":19,
    "year":2014,
    "sex":"FEM",
    "n":660
  },
  {
    "agegrp":19,
    "year":2014,
    "sex":"MAL",
    "n":325
  },
  {
    "agegrp":20,
    "year":2000,
    "sex":"FEM",
    "n":685
  },
  {
    "agegrp":20,
    "year":2000,
    "sex":"MAL",
    "n":342
  },
  {
    "agegrp":20,
    "year":2001,
    "sex":"FEM",
    "n":753
  },
  {
    "agegrp":20,
    "year":2001,
    "sex":"MAL",
    "n":333
  },
  {
    "agegrp":20,
    "year":2002,
    "sex":"FEM",
    "n":753
  },
  {
    "agegrp":20,
    "year":2002,
    "sex":"MAL",
    "n":300
  },
  {
    "agegrp":20,
    "year":2003,
    "sex":"FEM",
    "n":762
  },
  {
    "agegrp":20,
    "year":2003,
    "sex":"MAL",
    "n":282
  },
  {
    "agegrp":20,
    "year":2004,
    "sex":"FEM",
    "n":755
  },
  {
    "agegrp":20,
    "year":2004,
    "sex":"MAL",
    "n":254
  },
  {
    "agegrp":20,
    "year":2005,
    "sex":"FEM",
    "n":683
  },
  {
    "agegrp":20,
    "year":2005,
    "sex":"MAL",
    "n":214
  },
  {
    "agegrp":20,
    "year":2006,
    "sex":"FEM",
    "n":624
  },
  {
    "agegrp":20,
    "year":2006,
    "sex":"MAL",
    "n":197
  },
  {
    "agegrp":20,
    "year":2007,
    "sex":"FEM",
    "n":602
  },
  {
    "agegrp":20,
    "year":2007,
    "sex":"MAL",
    "n":200
  },
  {
    "agegrp":20,
    "year":2008,
    "sex":"FEM",
    "n":581
  },
  {
    "agegrp":20,
    "year":2008,
    "sex":"MAL",
    "n":187
  },
  {
    "agegrp":20,
    "year":2009,
    "sex":"FEM",
    "n":592
  },
  {
    "agegrp":20,
    "year":2009,
    "sex":"MAL",
    "n":206
  },
  {
    "agegrp":20,
    "year":2010,
    "sex":"FEM",
    "n":670
  },
  {
    "agegrp":20,
    "year":2010,
    "sex":"MAL",
    "n":242
  },
  {
    "agegrp":20,
    "year":2011,
    "sex":"FEM",
    "n":708
  },
  {
    "agegrp":20,
    "year":2011,
    "sex":"MAL",
    "n":253
  },
  {
    "agegrp":20,
    "year":2012,
    "sex":"FEM",
    "n":705
  },
  {
    "agegrp":20,
    "year":2012,
    "sex":"MAL",
    "n":266
  },
  {
    "agegrp":20,
    "year":2013,
    "sex":"FEM",
    "n":684
  },
  {
    "agegrp":20,
    "year":2013,
    "sex":"MAL",
    "n":272
  },
  {
    "agegrp":20,
    "year":2014,
    "sex":"FEM",
    "n":613
  },
  {
    "agegrp":20,
    "year":2014,
    "sex":"MAL",
    "n":247
  },
  {
    "agegrp":21,
    "year":2000,
    "sex":"FEM",
    "n":227
  },
  {
    "agegrp":21,
    "year":2000,
    "sex":"MAL",
    "n":145
  },
  {
    "agegrp":21,
    "year":2001,
    "sex":"FEM",
    "n":279
  },
  {
    "agegrp":21,
    "year":2001,
    "sex":"MAL",
    "n":148
  },
  {
    "agegrp":21,
    "year":2002,
    "sex":"FEM",
    "n":340
  },
  {
    "agegrp":21,
    "year":2002,
    "sex":"MAL",
    "n":161
  },
  {
    "agegrp":21,
    "year":2003,
    "sex":"FEM",
    "n":393
  },
  {
    "agegrp":21,
    "year":2003,
    "sex":"MAL",
    "n":187
  },
  {
    "agegrp":21,
    "year":2004,
    "sex":"FEM",
    "n":439
  },
  {
    "agegrp":21,
    "year":2004,
    "sex":"MAL",
    "n":202
  },
  {
    "agegrp":21,
    "year":2005,
    "sex":"FEM",
    "n":524
  },
  {
    "agegrp":21,
    "year":2005,
    "sex":"MAL",
    "n":219
  },
  {
    "agegrp":21,
    "year":2006,
    "sex":"FEM",
    "n":574
  },
  {
    "agegrp":21,
    "year":2006,
    "sex":"MAL",
    "n":219
  },
  {
    "agegrp":21,
    "year":2007,
    "sex":"FEM",
    "n":574
  },
  {
    "agegrp":21,
    "year":2007,
    "sex":"MAL",
    "n":200
  },
  {
    "agegrp":21,
    "year":2008,
    "sex":"FEM",
    "n":590
  },
  {
    "agegrp":21,
    "year":2008,
    "sex":"MAL",
    "n":197
  },
  {
    "agegrp":21,
    "year":2009,
    "sex":"FEM",
    "n":570
  },
  {
    "agegrp":21,
    "year":2009,
    "sex":"MAL",
    "n":164
  },
  {
    "agegrp":21,
    "year":2010,
    "sex":"FEM",
    "n":529
  },
  {
    "agegrp":21,
    "year":2010,
    "sex":"MAL",
    "n":144
  },
  {
    "agegrp":21,
    "year":2011,
    "sex":"FEM",
    "n":481
  },
  {
    "agegrp":21,
    "year":2011,
    "sex":"MAL",
    "n":125
  },
  {
    "agegrp":21,
    "year":2012,
    "sex":"FEM",
    "n":459
  },
  {
    "agegrp":21,
    "year":2012,
    "sex":"MAL",
    "n":126
  },
  {
    "agegrp":21,
    "year":2013,
    "sex":"FEM",
    "n":442
  },
  {
    "agegrp":21,
    "year":2013,
    "sex":"MAL",
    "n":111
  },
  {
    "agegrp":21,
    "year":2014,
    "sex":"FEM",
    "n":449
  },
  {
    "agegrp":21,
    "year":2014,
    "sex":"MAL",
    "n":126
  },
  {
    "agegrp":22,
    "year":2000,
    "sex":"FEM",
    "n":189
  },
  {
    "agegrp":22,
    "year":2000,
    "sex":"MAL",
    "n":87
  },
  {
    "agegrp":22,
    "year":2001,
    "sex":"FEM",
    "n":207
  },
  {
    "agegrp":22,
    "year":2001,
    "sex":"MAL",
    "n":97
  },
  {
    "agegrp":22,
    "year":2002,
    "sex":"FEM",
    "n":213
  },
  {
    "agegrp":22,
    "year":2002,
    "sex":"MAL",
    "n":103
  },
  {
    "agegrp":22,
    "year":2003,
    "sex":"FEM",
    "n":184
  },
  {
    "agegrp":22,
    "year":2003,
    "sex":"MAL",
    "n":80
  },
  {
    "agegrp":22,
    "year":2004,
    "sex":"FEM",
    "n":170
  },
  {
    "agegrp":22,
    "year":2004,
    "sex":"MAL",
    "n":87
  },
  {
    "agegrp":22,
    "year":2005,
    "sex":"FEM",
    "n":173
  },
  {
    "agegrp":22,
    "year":2005,
    "sex":"MAL",
    "n":80
  },
  {
    "agegrp":22,
    "year":2006,
    "sex":"FEM",
    "n":200
  },
  {
    "agegrp":22,
    "year":2006,
    "sex":"MAL",
    "n":82
  },
  {
    "agegrp":22,
    "year":2007,
    "sex":"FEM",
    "n":246
  },
  {
    "agegrp":22,
    "year":2007,
    "sex":"MAL",
    "n":90
  },
  {
    "agegrp":22,
    "year":2008,
    "sex":"FEM",
    "n":280
  },
  {
    "agegrp":22,
    "year":2008,
    "sex":"MAL",
    "n":118
  },
  {
    "agegrp":22,
    "year":2009,
    "sex":"FEM",
    "n":322
  },
  {
    "agegrp":22,
    "year":2009,
    "sex":"MAL",
    "n":120
  },
  {
    "agegrp":22,
    "year":2010,
    "sex":"FEM",
    "n":374
  },
  {
    "agegrp":22,
    "year":2010,
    "sex":"MAL",
    "n":123
  },
  {
    "agegrp":22,
    "year":2011,
    "sex":"FEM",
    "n":386
  },
  {
    "agegrp":22,
    "year":2011,
    "sex":"MAL",
    "n":123
  },
  {
    "agegrp":22,
    "year":2012,
    "sex":"FEM",
    "n":381
  },
  {
    "agegrp":22,
    "year":2012,
    "sex":"MAL",
    "n":117
  },
  {
    "agegrp":22,
    "year":2013,
    "sex":"FEM",
    "n":389
  },
  {
    "agegrp":22,
    "year":2013,
    "sex":"MAL",
    "n":120
  },
  {
    "agegrp":22,
    "year":2014,
    "sex":"FEM",
    "n":391
  },
  {
    "agegrp":22,
    "year":2014,
    "sex":"MAL",
    "n":100
  },
  {
    "agegrp":23,
    "year":2000,
    "sex":"FEM",
    "n":196
  },
  {
    "agegrp":23,
    "year":2000,
    "sex":"MAL",
    "n":65
  },
  {
    "agegrp":23,
    "year":2001,
    "sex":"FEM",
    "n":188
  },
  {
    "agegrp":23,
    "year":2001,
    "sex":"MAL",
    "n":63
  },
  {
    "agegrp":23,
    "year":2002,
    "sex":"FEM",
    "n":171
  },
  {
    "agegrp":23,
    "year":2002,
    "sex":"MAL",
    "n":53
  },
  {
    "agegrp":23,
    "year":2003,
    "sex":"FEM",
    "n":187
  },
  {
    "agegrp":23,
    "year":2003,
    "sex":"MAL",
    "n":49
  },
  {
    "agegrp":23,
    "year":2004,
    "sex":"FEM",
    "n":191
  },
  {
    "agegrp":23,
    "year":2004,
    "sex":"MAL",
    "n":55
  },
  {
    "agegrp":23,
    "year":2005,
    "sex":"FEM",
    "n":204
  },
  {
    "agegrp":23,
    "year":2005,
    "sex":"MAL",
    "n":66
  },
  {
    "agegrp":23,
    "year":2006,
    "sex":"FEM",
    "n":216
  },
  {
    "agegrp":23,
    "year":2006,
    "sex":"MAL",
    "n":72
  },
  {
    "agegrp":23,
    "year":2007,
    "sex":"FEM",
    "n":211
  },
  {
    "agegrp":23,
    "year":2007,
    "sex":"MAL",
    "n":75
  },
  {
    "agegrp":23,
    "year":2008,
    "sex":"FEM",
    "n":198
  },
  {
    "agegrp":23,
    "year":2008,
    "sex":"MAL",
    "n":63
  },
  {
    "agegrp":23,
    "year":2009,
    "sex":"FEM",
    "n":196
  },
  {
    "agegrp":23,
    "year":2009,
    "sex":"MAL",
    "n":71
  },
  {
    "agegrp":23,
    "year":2010,
    "sex":"FEM",
    "n":215
  },
  {
    "agegrp":23,
    "year":2010,
    "sex":"MAL",
    "n":80
  },
  {
    "agegrp":23,
    "year":2011,
    "sex":"FEM",
    "n":226
  },
  {
    "agegrp":23,
    "year":2011,
    "sex":"MAL",
    "n":91
  },
  {
    "agegrp":23,
    "year":2012,
    "sex":"FEM",
    "n":259
  },
  {
    "agegrp":23,
    "year":2012,
    "sex":"MAL",
    "n":84
  },
  {
    "agegrp":23,
    "year":2013,
    "sex":"FEM",
    "n":281
  },
  {
    "agegrp":23,
    "year":2013,
    "sex":"MAL",
    "n":85
  },
  {
    "agegrp":23,
    "year":2014,
    "sex":"FEM",
    "n":299
  },
  {
    "agegrp":23,
    "year":2014,
    "sex":"MAL",
    "n":90
  }
];
        draw(fiveYearAgeGrps,total_data);
    }

    


    function draw(agegrps,data) {
        "use strict";
        years = [];

        for(var i = 0; i < total_data.length; i++){
            if (years.indexOf(total_data[i].year) == -1) years.push(total_data[i].year);
        }
        years = years.unique();
            
        // set up the viewport, the scales, and axis generators
        
        var container_dimensions = {width: 900, height: 400},
            margins = {top: 10, right: 20, bottom: 30, left: 60},
            chart_dimensions = {
                width: container_dimensions.width - margins.left - margins.right,
                height: container_dimensions.height - margins.top - margins.bottom
            };

        time_scale = d3.time.scale()
            .range([0, chart_dimensions.width])
            .domain([d3.min(total_data, function(d) {return new Date('01/07/'+d.year)}),
                       d3.max(total_data, function(d) {return new Date('01/07/'+d.year)})]);
        
        var maxPercent = getMaxPercentageForAllYears();
        percent_scale = d3.scale.linear()
            .range([chart_dimensions.height, 0])
            .domain([0, maxPercent]);
        
        var time_axis = d3.svg.axis()
            .scale(time_scale)
            .tickValues([new Date('07/01'+'2001'),new Date('07/01'+'2002'),new Date('07/01'+'2003'),new Date('07/01'+'2004'),new Date('07/01'+'2005'),new Date('07/01'+'2006'),new Date('07/01'+'2007'),new Date('07/01'+'2008'),new Date('07/01'+'2009'),new Date('07/01'+'2010'),new Date('07/01'+'2011'),new Date('07/01'+'2012'),new Date('07/01'+'2013'),new Date('07/01/'+'2014')]);
        
        var count_axis = d3.svg.axis()
            .scale(percent_scale)
            .orient("left")
            .tickFormat(d3.format('%'));
        
        // draw axes
        
        var g = d3.select('#timeseries')
          .append('svg')
            .attr("width", container_dimensions.width)
            .attr("height", container_dimensions.height)
          .append("g")
            .attr("transform", "translate(" + margins.left + "," + margins.top + ")")
            .attr("id","chart");
        
        g.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + chart_dimensions.height + ")")
          .call(time_axis);
         
        g.append("g")
          .attr("class", "y axis")
          .call(count_axis);
        
      // draw the y-axis label
        
        d3.select('.y.axis')
            .append('text')
            .text('percent (%)')
            .attr('transform', "rotate (-270, 0, 0)")
            .attr('x', 100)
            .attr('y', 50);
        
        // draw the key
        
        var key_items = d3.select('#key')
          .selectAll('div')
          .data(agegrps)
          .enter()
          .append('div')
            .attr('class','key_line')
            .attr('id',function(d){return "key_"+d.agegrp})
            
        key_items.append('div')
            .attr('id', function(d){return 'key_square_' + d.agegrp})
            .attr('class', function(d){return 'key_square line_' + d.agegrp})
        
        key_items.append('div')
            .attr('class','key_label')
            .text(function(d){return d.value})
        
        d3.selectAll('.key_line')
            .on('click', get_timeseries_data)
        
    }
    </script>
</head>
<body>
    <div id="timeseries"></div>
    <div id="key"></div>
    
    
    <script>
        var groups = '[{"agegrp": "6","value": "0-4"},{"agegrp": "7","value": "5-9"},{"agegrp": "8","value": "10-14"},{"agegrp": "9","value": "15-19"},{"agegrp": "10","value": "20-24"},{"agegrp":"11","value": "25-29"},{"agegrp": "12","value": "30-34"},{"agegrp": "13","value": "35-39"},{"agegrp": "14","value":"40-44"},{"agegrp":"15","value": "45-49"},{"agegrp":"16","value": "50-54"},{"agegrp": "17","value": "55-59"},{"agegrp": "18","value": "60-64"},{"agegrp": "19","value": "65-69"},{"agegrp": "20","value": "70-74"},{"agegrp": "21","value": "75-79"},{"agegrp": "22","value": "80-84"},{"agegrp": "23","value": "85+"}]';
        var fiveYearAgeGrps = JSON.parse(groups);
        //alert("alert1 "+total_data[0]) ;  

        getData();
        
    </script>
</body>
</html>